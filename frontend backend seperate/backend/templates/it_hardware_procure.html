{% extends "layout.html" %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/it_hardware_procure.css') }}">
{% endblock %}

{% block content %}

<section id="header">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <h2>IT Hardware Procurement Solution</h2>
                <p><img src="/static/images/procure.svg" alt="">Product Offers</p>
                <p><img src="/static/images/procure1.svg" alt="">100% guarantees</p>
                <p style="margin-bottom: 30px;"><img src="/static/images/procure2.svg" alt="">Fast Delivery</p>
                <a href="#consultation-form" class="submit-button" role="button">Get Your Custom Quote ></a>
            </div>
        </div>
    </div>
</section>

<section id="products_li">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <h3>Products</h3>
                <div class="row">
                    <div class="col-lg-3">
                        <a href=""><p><img src="/static/images/CPU.webp" alt="">CPU</p></a>
                    </div>
                    <div class="col-lg-3">
                        <a href=""><p><img src="/static/images/HDD.webp" alt="">HDD</p></a>
                    </div>
                    <div class="col-lg-3">
                        <a href=""><p><img src="/static/images/SSD.webp" alt="">SSD</p></a>
                    </div>
                    <div class="col-lg-3">
                        <a href=""><p><img src="/static/images/memory.webp" alt="">MEMORY</p></a>
                    </div>
                    <div class="col-lg-3">
                        <a href=""><p><img src="/static/images/laptop.jpg" alt="">LAPTOP</p></a>
                    </div>
                    <div class="col-lg-3">
                        <a href=""><p><img src="/static/images/CPU.webp" alt="">MONITORS</p></a>
                    </div>
                    <div class="col-lg-3">
                        <a href=""><p><img src="/static/images/CPU.webp" alt="">MINI PC</p></a>
                    </div>
                    <div class="col-lg-3">
                        <a href=""><p><img src="/static/images/CPU.webp" alt="">NETWORK</p></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="why-us-section">
    <h2 class="section-title">Why 12,000+ Clients Choose Us for IT Procurement</h2>
    
    <div class="slider-container">
        <button class="nav-button prev-button" aria-label="Previous Slide">‚ùÆ</button>
        <button class="nav-button next-button" aria-label="Next Slide">‚ùØ</button>
        
        <div class="card-track">
            <div class="card-item">
                <div class="card-image-wrapper">
                    <img src="/static/images/about header.jpg" alt="Group handshake">
                </div>
                <h3>Cost Leadership</h3>
                <p>Direct partnerships with 50+ manuf including Intel Tier 2 partners</p>
            </div>
            
            <div class="card-item">
                <div class="card-image-wrapper">
                    <img src="/static/images/about header.jpg" alt="Warehouse server racks">
                </div>
                <h3>Inventory Depth</h3>
                <p>Always 150,000+ SKUs ready to ship from global warehouses</p>
            </div>
            
            <div class="card-item">
                <div class="card-image-wrapper">
                    <img src="/static/images/about header.jpg" alt="Box with guarantee label">
                </div>
                <h3>Risk Mitigation</h3>
                <p>100% Authenticity Guarantee & lifetime technical support</p>
            </div>
            <div class="card-item">
                <div class="card-image-wrapper">
                    <img src="/static/images/about header.jpg" alt="Box with guarantee label">
                </div>
                <h3>Dedicated Account Support</h3>
                <p>Expert guidance from procurement specialists who know your business.</p>
            </div>
            <div class="card-item">
                <div class="card-image-wrapper">
                    <img src="/static/images/about header.jpg" alt="Box with guarantee label">
                </div>
                <h3>Fast Fulfillment</h3>
                <p>Same-day processing and expedited global delivery options</p>
            </div>
        </div>
    </div>
</section>

<section class="consultation-section" id="consultation-form">
    <div class="consultation-info">
        <h1>Request A Consultation</h1>
        <p>Our team will provide the most competitive solutions based on your project needs.</p>
    </div>
    
    <div class="consultation-form-wrapper">
        <form class="consultation-form">
            <div class="form-group full-width">
                <input type="text" id="product-name" placeholder="Product Name Model (e.g., Intel Core i7-12700K)" required>
                <span class="required-error" id="product-error" style="display: none;"></span>
            </div>

            <div class="form-row">
                <div class="form-group half-width quantity-group">
                    <select id="quantity" required>
                        <option value="" disabled selected>Quantity (1 - 10)</option>
                        <option value="1-10">1 - 10</option>
                        <option value="11-50">11 - 50</option>
                        <option value="51-100">51 - 100</option>
                        <option value="100+">100+</option>
                    </select>
                    <span class="required-error" id="quantity-error" style="display: none;"></span>
                </div>

                <div class="form-group half-width">
                    <input type="text" id="company-name" placeholder="Company Name (e.g., ABC Technologies)" required>
                    <span class="required-error" id="company-error" style="display: none;"></span>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group half-width">
                    <input type="email" id="email" placeholder="Email Address (e.g., user@example.com)" required>
                    <span class="required-error" id="email-error" style="display: none;"></span>
                </div>

                <div class="form-group half-width">
                    <label for="phone" class="visually-hidden">Phone/Whatsapp</label>
                    <input type="tel" id="phone" placeholder="* Phone/Whatsapp (e.g., +91 XXXXXXXXXX)" style="width: 387px;">
                    <span class="required-error" id="phone-error" style="display: none;"></span>
                </div>
            </div>

            <div class="form-group full-width textarea-group">
                <textarea id="inquiry-details" placeholder="Inquiry Details"></textarea>
            </div>
            
            <div class="form-actions full-width">
                <label class="checkbox-label">
                    <input type="checkbox" id="notify-price">
                    Get notified of our best prices!
                </label>
                <button type="submit" class="submit-button">Submit</button>
            </div>
            <p id="consultation-status" style="text-align:center; color:green; display:none;"></p>
        </form>
    </div>
</section>

<section id="who_we">
    <div class="container">
        <div class="row">
            <div class="col-lg-10">
                <div class="row">
                    <div class="col-lg-4">
                        <p style="color: red;">who we are</p>
                        <h3>EXCELLENCE IS OUR STANDARD</h3>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempore laborum laboriosam totam numquam! Ad rem officia eveniet dolor alias iure aut nemo nisi velit, consequuntur obcaecati facere minus recusandae ipsam!</p>
                    </div>
                    <div class="col-lg-7" id="who_logo">
                        <img src="/static/images/jubiliant logo.webp" alt="" id="who_img">
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="partners-section">
    <div class="partners-header">
        <h1>Partners</h1>
        <a class="view-more-button" href="/suppliers.html">View More</a>
    </div>
    <div class="partners-grid">
        <div class="partner-logo"><img src="/static/images/about1.webp" alt="Supermicro"></div>
        <div class="partner-logo"><img src="/static/images/about1.webp" alt="Solidigm"></div>
        <div class="partner-logo"><img src="/static/images/about1.webp" alt="Dell"></div>
        <div class="partner-logo"><img src="/static/images/about1.webp" alt="Intel"></div>
        <div class="partner-logo"><img src="/static/images/about1.webp" alt="Mellanox Technologies"></div>
        <div class="partner-logo"><img src="/static/images/about1.webp" alt="AMD Ryzen"></div>
        <div class="partner-logo"><img src="/static/images/about1.webp" alt="Seagate"></div>
        <div class="partner-logo"><img src="/static/images/about1.webp" alt="AMD"></div>
        <div class="partner-logo"><img src="/static/images/about1.webp" alt="Lenovo"></div>
        <div class="partner-logo"><img src="/static/images/about1.webp" alt="Samsung"></div>
        <div class="partner-logo"><img src="/static/images/about1.webp" alt="Western Digital"></div>
        <div class="partner-logo"><img src="/static/images/about1.webp" alt="HPE"></div>
    </div>
</section>

<!-- Inquiry Modal -->
<button class="inquiry-button" onclick="toggleModal('open')">üí¨ Inquiry</button>

<div id="inquiryModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Send an Inquiry</h2>
            <span class="close-btn" onclick="toggleModal('close')">&times;</span>
        </div>

        <p class="modal-subtitle">Tell us what you need‚Äîwe'll respond within 24 hours.</p>

        <form id="inquiryForm" action="/send-inquiry" method="POST">
            <label for="modal-name">Name</label>
            <input type="text" id="modal-name" name="name" placeholder="Your name" required />

            <label for="modal-email">Email</label>
            <input type="email" id="modal-email" name="email" placeholder="you@example.com" required />

            <label for="modal-phone">Phone</label>
            <input type="tel" id="modal-phone" name="phone" value="+91 98765 43210" />

            <label for="modal-product">Product / Service</label>
            <select id="modal-product" name="product">
                <option>Select</option>
                <option>Jubilant System</option>
                <option>Other Service</option>
            </select>

            <label for="modal-quantity">Quantity (optional)</label>
            <input type="number" id="modal-quantity" name="quantity" placeholder="1" />

            <p class="modal-footer-text">
                We respect your privacy. We'll only use this info to reply.
            </p>

            <button type="submit" class="submit-button">Inquiry New</button>
            <p id="successMsg" style="color: green; display: none;">Inquiry sent successfully!</p>
        </form>
    </div>
</div>

<script>
    // Slider functionality
    document.addEventListener('DOMContentLoaded', () => {
        const track = document.querySelector('.card-track');
        const nextButton = document.querySelector('.next-button');
        const prevButton = document.querySelector('.prev-button');

        if (track && nextButton && prevButton) {
            const cardWidth = 300;
            const gap = 30;
            const scrollDistance = cardWidth + gap;

            nextButton.addEventListener('click', () => {
                track.scrollBy({
                    left: scrollDistance,
                    behavior: 'smooth'
                });
                updateButtonVisibility();
            });

            prevButton.addEventListener('click', () => {
                track.scrollBy({
                    left: -scrollDistance,
                    behavior: 'smooth'
                });
                updateButtonVisibility();
            });

            const updateButtonVisibility = () => {
                setTimeout(() => {
                    const maxScroll = track.scrollWidth - track.clientWidth;
                    const currentScroll = track.scrollLeft;

                    prevButton.disabled = currentScroll <= 5; 
                    nextButton.disabled = currentScroll >= maxScroll - 5; 
                }, 500);
            };

            updateButtonVisibility();
            track.addEventListener('scroll', updateButtonVisibility);
        }
    });

    // Consultation form AJAX validation
    document.addEventListener("DOMContentLoaded", () => {
        const form = document.querySelector(".consultation-form");
        const statusText = document.getElementById("consultation-status");
        
        // Get all input elements
        const productInput = document.getElementById("product-name");
        const quantitySelect = document.getElementById("quantity");
        const companyInput = document.getElementById("company-name");
        const emailInput = document.getElementById("email");
        const phoneInput = document.getElementById("phone");
        
        // Get all error elements
        const productError = document.getElementById("product-error");
        const quantityError = document.getElementById("quantity-error");
        const companyError = document.getElementById("company-error");
        const emailError = document.getElementById("email-error");
        const phoneError = document.getElementById("phone-error");

        if (!form) return;

        // Product Name validation
        productInput.addEventListener("blur", () => {
            if (!productInput.value.trim()) {
                productError.textContent = "Product name is required";
                productError.style.display = "block";
                productInput.style.borderColor = "red";
            } else if (productInput.value.trim().length < 3) {
                productError.textContent = "Product name must be at least 3 characters";
                productError.style.display = "block";
                productInput.style.borderColor = "red";
            } else {
                productError.textContent = "";
                productError.style.display = "none";
                productInput.style.borderColor = "#ccc";
            }
        });

        // Clear error on input
        productInput.addEventListener("input", () => {
            if (productInput.value.trim().length >= 3) {
                productError.style.display = "none";
                productInput.style.borderColor = "#ccc";
            }
        });

        // Quantity validation
        quantitySelect.addEventListener("change", () => {
            if (!quantitySelect.value) {
                quantityError.textContent = "Please select a quantity";
                quantityError.style.display = "block";
                quantitySelect.style.borderColor = "red";
            } else {
                quantityError.textContent = "";
                quantityError.style.display = "none";
                quantitySelect.style.borderColor = "#ccc";
            }
        });

        // Company Name validation
        companyInput.addEventListener("blur", () => {
            if (!companyInput.value.trim()) {
                companyError.textContent = "Company name is required";
                companyError.style.display = "block";
                companyInput.style.borderColor = "red";
            } else if (companyInput.value.trim().length < 2) {
                companyError.textContent = "Company name must be at least 2 characters";
                companyError.style.display = "block";
                companyInput.style.borderColor = "red";
            } else {
                companyError.textContent = "";
                companyError.style.display = "none";
                companyInput.style.borderColor = "#ccc";
            }
        });

        // Clear error on input
        companyInput.addEventListener("input", () => {
            if (companyInput.value.trim().length >= 2) {
                companyError.style.display = "none";
                companyInput.style.borderColor = "#ccc";
            }
        });

        // Email validation (AJAX-like real-time)
        emailInput.addEventListener("blur", () => {
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailInput.value.trim()) {
                emailError.textContent = "Email address is required";
                emailError.style.display = "block";
                emailInput.style.borderColor = "red";
            } else if (!emailPattern.test(emailInput.value)) {
                emailError.textContent = "Please enter a valid email address (e.g., user@example.com)";
                emailError.style.display = "block";
                emailInput.style.borderColor = "red";
            } else {
                emailError.textContent = "";
                emailError.style.display = "none";
                emailInput.style.borderColor = "#ccc";
            }
        });

        // Clear email error on input
        emailInput.addEventListener("input", () => {
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (emailPattern.test(emailInput.value)) {
                emailError.style.display = "none";
                emailInput.style.borderColor = "#ccc";
            }
        });

        // Phone validation (AJAX-like real-time)
        phoneInput.addEventListener("blur", () => {
            const phonePattern = /^\+?[\d\s\-()]+$/;
            const phoneValue = phoneInput.value.trim();
            
            if (!phoneValue) {
                phoneError.textContent = "Phone number is required";
                phoneError.style.display = "block";
                phoneInput.style.borderColor = "red";
            } else if (!phonePattern.test(phoneValue) || phoneValue.replace(/\D/g, '').length < 10) {
                phoneError.textContent = "Please enter a valid phone number (e.g., +91 9876543210)";
                phoneError.style.display = "block";
                phoneInput.style.borderColor = "red";
            } else {
                phoneError.textContent = "";
                phoneError.style.display = "none";
                phoneInput.style.borderColor = "#ccc";
            }
        });

        // Clear phone error on input
        phoneInput.addEventListener("input", () => {
            const phonePattern = /^\+?[\d\s\-()]+$/;
            const phoneValue = phoneInput.value.trim();
            if (phonePattern.test(phoneValue) && phoneValue.replace(/\D/g, '').length >= 10) {
                phoneError.style.display = "none";
                phoneInput.style.borderColor = "#ccc";
            }
        });

        form.addEventListener("submit", async (e) => {
            e.preventDefault();

            // Validate all fields before submission
            let isValid = true;

            if (!productInput.value.trim() || productInput.value.trim().length < 3) {
                productError.textContent = "Product name is required (min 3 characters)";
                productError.style.display = "block";
                productInput.style.borderColor = "red";
                isValid = false;
            }

            if (!quantitySelect.value) {
                quantityError.textContent = "Please select a quantity";
                quantityError.style.display = "block";
                quantitySelect.style.borderColor = "red";
                isValid = false;
            }

            if (!companyInput.value.trim() || companyInput.value.trim().length < 2) {
                companyError.textContent = "Company name is required (min 2 characters)";
                companyError.style.display = "block";
                companyInput.style.borderColor = "red";
                isValid = false;
            }

            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailInput.value.trim() || !emailPattern.test(emailInput.value)) {
                emailError.textContent = "Valid email address is required";
                emailError.style.display = "block";
                emailInput.style.borderColor = "red";
                isValid = false;
            }

            const phonePattern = /^\+?[\d\s\-()]+$/;
            const phoneValue = phoneInput.value.trim();
            if (!phoneValue || !phonePattern.test(phoneValue) || phoneValue.replace(/\D/g, '').length < 10) {
                phoneError.textContent = "Valid phone number is required (min 10 digits)";
                phoneError.style.display = "block";
                phoneInput.style.borderColor = "red";
                isValid = false;
            }

            if (!isValid) {
                statusText.textContent = "‚ùå Please fix all errors before submitting";
                statusText.style.color = "red";
                statusText.style.display = "block";
                setTimeout(() => {
                    statusText.style.display = "none";
                }, 3000);
                return;
            }

            statusText.style.display = "none";
            statusText.textContent = "";

            const formData = new FormData();
            formData.append("product_name", productInput.value);
            formData.append("quantity", quantitySelect.value);
            formData.append("company_name", companyInput.value);
            formData.append("email", emailInput.value);
            formData.append("phone", phoneInput.value);
            formData.append("inquiry_details", document.getElementById("inquiry-details").value);
            formData.append("notify_price", document.getElementById("notify-price").checked ? "on" : "off");

            try {
                const response = await fetch("/send-consultation", {
                    method: "POST",
                    body: formData,
                });

                const result = await response.json();
                statusText.style.display = "block";

                if (result.success) {
                    statusText.textContent = "‚úÖ Your consultation request has been submitted successfully!";
                    statusText.style.color = "green";
                    form.reset();
                    setTimeout(() => {
                        statusText.style.display = "none";
                    }, 5000);
                } else {
                    statusText.textContent = "‚ùå " + result.message;
                    statusText.style.color = "red";
                }
            } catch (error) {
                console.error("Error:", error);
                statusText.style.display = "block";
                statusText.textContent = "‚ùå Something went wrong. Please try again.";
                statusText.style.color = "red";
            }
        });
    });

    // Inquiry modal functionality
    function toggleModal(action) {
        const modal = document.getElementById("inquiryModal");
        modal.style.display = action === "open" ? "flex" : "none";
    }

    document.getElementById("inquiryForm").addEventListener("submit", async function (e) {
        e.preventDefault();
        const formData = new FormData(this);
        const response = await fetch("/send-inquiry", { method: "POST", body: formData });
        const result = await response.json();
        const successMsg = document.getElementById("successMsg");
        const modal = document.getElementById("inquiryModal");

        if (result.success) {
            successMsg.textContent = result.message || "Inquiry sent successfully!";
            successMsg.style.color = "green";
            successMsg.style.display = "block";
            this.reset();
            setTimeout(() => (modal.style.display = "none"), 2000);
        } else {
            successMsg.textContent = result.message || "Failed to send inquiry. Please try again.";
            successMsg.style.color = "red";
            successMsg.style.display = "block";
        }

        setTimeout(() => (successMsg.style.display = "none"), 5000);
    });

    feather.replace();
</script>

{% endblock %}