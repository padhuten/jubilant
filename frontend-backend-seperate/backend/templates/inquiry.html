{% extends "layout.html" %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/inquiry.css') }}">
{% endblock %}

{% block content %}
<!-- Quote Banner Section -->
<div class="quote-banner">
    <div class="quote-container">
        <h2 class="quote-heading">
            Need help with a project or looking for expert advice? 
            <span class="highlight-text">Get in touch today and let's create something amazing together.</span>
        </h2>
    </div>
</div>

<div class="contact-section">
    <div class="contact-container">
        <div class="contact-wrapper">

            <!-- Left Form -->
            <div class="contact-form-area">
                <h2 class="form-title">Contact Us</h2>

                <form id="contactPageForm" class="contact-form" action="/send-inquiry" method="POST">

                    <!-- Hidden fields required by backend -->
                    <input type="hidden" name="product" value="General Inquiry">
                    <input type="hidden" name="quantity" value="N/A">
                    <input type="hidden" name="phone" value="N/A">

                    <div class="form-row-group">
                        <div class="form-field full-width">
                            <input 
                                type="text" 
                                id="full-name" 
                                name="name" 
                                placeholder="Full Name" 
                                required
                            >
                        </div>
                    </div>

                    <div class="form-row-group">
                        <div class="form-field half-width">
                            <input 
                                type="email" 
                                id="email-address" 
                                name="email" 
                                placeholder="Email Address" 
                                required
                            >
                        </div>

                        <div class="form-field half-width">
                            <input 
                                type="text" 
                                id="subject" 
                                name="subject" 
                                placeholder="Subject"
                            >
                        </div>
                    </div>

                    <div class="form-row-group">
                        <div class="form-field full-width">
                            <textarea 
                                id="message" 
                                name="message" 
                                placeholder="Message" 
                                rows="5"
                            ></textarea>
                        </div>
                    </div>

                    <div class="form-row-group">
                        <button type="submit" class="send-message-btn">Send Message</button>
                    </div>

                    <div id="form-message"></div>
                </form>
            </div>

            <!-- Right Map -->
            <div class="contact-info-area">
                <div class="map-container">
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3791.3631220042653!2d103.88256237472456!3d1.3433500986439317!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31da17de5d4a324b%3A0x36f83dc1158a2413!2sSolstice%20Business%20Centre!5e1!3m2!1sen!2sin!4v1761297999190!5m2!1sen!2sin" 
                        style="border:0;" 
                        allowfullscreen 
                        loading="lazy">
                    </iframe>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- NEW CONTACT FORM JS (Only for this page) -->
<script>
document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("contactPageForm");
    const button = form.querySelector(".send-message-btn");
    const msgBox = document.getElementById("form-message");

    form.addEventListener("submit", async (e) => {
        e.preventDefault();

        // Loader UI
        button.disabled = true;
        button.classList.add("loading");
        msgBox.style.display = "none";

        const formData = new FormData(form);

        try {
            const res = await fetch("/send-inquiry", {
                method: "POST",
                body: formData
            });

            if (res.ok) {
                msgBox.textContent = "Message sent successfully ðŸŽ‰";
                msgBox.className = "success show";
                msgBox.style.display = "block";
                form.reset();
            } else {
                throw new Error("Server error");
            }

        } catch (error) {
            msgBox.textContent = "Unable to send message ðŸ˜“ Try again later.";
            msgBox.className = "error show";
            msgBox.style.display = "block";
        }

        button.disabled = false;
        button.classList.remove("loading");
    });
});
</script>

{% endblock %}
