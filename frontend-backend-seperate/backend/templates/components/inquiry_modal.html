<!-- Inquiry Button (Fixed at bottom-right) -->
<button class="inquiry-button" type="button" onclick="toggleInquiryModal('open')">
  ðŸ’¬ Inquiry
</button>

<!-- Inquiry Modal -->
<div id="inquiryModal" class="modal-overlay" style="display:none;">
  <div class="modal-content">

    <div class="modal-header">
      <h2>Send an Inquiry</h2>
      <button type="button" class="close-btn"
        onclick="toggleInquiryModal('close')" aria-label="Close modal">
        &times;
      </button>
    </div>

    <p class="modal-subtitle">
      Tell us what you need â€” weâ€™ll respond within 24 hours.
    </p>

    <!-- FORM -->
    <form id="inquiryForm" novalidate>

      <div>
        <label>Full Name *</label>
        <input type="text" name="name" placeholder="John Doe" required>
      </div>

      <div>
        <label>Email Address *</label>
        <input type="email" name="email" placeholder="john@example.com" required>
      </div>

      <div>
        <label>Phone Number</label>
        <input type="tel" name="phone" placeholder="+91 xxxx xxxxxx">
      </div>

      <div>
        <label>Product / Service *</label>
        <select name="product" required>
          <option value="">Select a product</option>
          <option value="CPU">CPU</option>
          <option value="HDD">HDD</option>
          <option value="SSD">SSD</option>
          <option value="Memory">Memory</option>
          <option value="Laptop">Laptop</option>
          <option value="Monitor">Monitor</option>
          <option value="Mini PC">Mini PC</option>
          <option value="Network">Network Equipment</option>
          <option value="Other">Other</option>
        </select>
      </div>

      <div>
        <label>Quantity (optional)</label>
        <input type="number" name="quantity" min="1" placeholder="1">
      </div>

      <p class="modal-footer-text">
        âœ“ We respect your privacy. Your information is secure.
      </p>

      <button type="button" id="sendInquiryBtn" class="submit-button">
        Send Inquiry
      </button>

    </form>

    <!-- SUCCESS MESSAGE -->
    <div id="inquirySuccessBox" style="display:none; text-align:center;">
      <h3 style="color:#16a34a; margin-bottom:10px;">
        âœ… Inquiry Sent Successfully!
      </h3>
      <p>
        Thank you for reaching out.  
        Our team will get back to you within a short time.
      </p>
    </div>

  </div>
</div>

<script>
function toggleInquiryModal(action) {
  const modal = document.getElementById("inquiryModal");
  const form = document.getElementById("inquiryForm");
  const successBox = document.getElementById("inquirySuccessBox");
  const sendBtn = document.getElementById("sendInquiryBtn");

  if (action === "open") {
    modal.style.display = "flex";

    // âœ… RESET FOR NEXT ENQUIRY
    form.style.display = "block";
    successBox.style.display = "none";
    form.reset();

    sendBtn.disabled = false;
    sendBtn.textContent = "Send Inquiry";
  }

  if (action === "close") {
    modal.style.display = "none";
  }
}

document.getElementById("sendInquiryBtn").addEventListener("click", async () => {
  const form = document.getElementById("inquiryForm");
  const successBox = document.getElementById("inquirySuccessBox");
  const sendBtn = document.getElementById("sendInquiryBtn");

  if (!form.checkValidity()) {
    form.reportValidity();
    return;
  }

  sendBtn.disabled = true;
  sendBtn.textContent = "Sending...";

  const formData = new FormData(form);

  try {
    const res = await fetch("/send-inquiry", {
      method: "POST",
      body: formData
    });

    if (!res.ok) throw new Error();

    // Show success
    form.style.display = "none";
    successBox.style.display = "block";

    // Auto close after 3 seconds
    setTimeout(() => toggleInquiryModal("close"), 3000);

  } catch (err) {
    sendBtn.disabled = false;
    sendBtn.textContent = "Send Inquiry";
    alert("Something went wrong. Please try again.");
  }
});
</script>
